<div class="comment-item {% if comment.status == 'resolved' %}resolved{% endif %}" 
     data-comment-id="{{ comment.id }}">
    
    <div class="comment-header">
        <div class="comment-severity severity-{{ comment.severity }}">
            <i class="fas fa-exclamation-circle"></i>
            {% if comment.severity == 'low' %}Низкая
            {% elif comment.severity == 'medium' %}Средняя
            {% elif comment.severity == 'high' %}Высокая
            {% elif comment.severity == 'critical' %}Критическая
            {% else %}Средняя{% endif %}
        </div>
        <span class="comment-date">{{ comment.created_at|date:"d.m.Y H:i" }}</span>
    </div>

    {% if comment.highlighted_text %}
    <div class="comment-context">
        <strong>Выделенный текст:</strong> "{{ comment.highlighted_text }}"
    </div>
    {% endif %}

    <div class="comment-text">
        {{ comment.comment }}
    </div>

    <div class="comment-meta">
        <span>Модератор: {{ comment.moderator.username }}</span>
        {% if comment.status == 'resolved' %}
            <span style="color: #22c55e;">✓ Исправлено</span>
        {% else %}
            <span style="color: #f59e0b;">⏳ Ожидает</span>
        {% endif %}
    </div>

    {% if comment.status != 'resolved' %}
    <div class="comment-actions">
        <button class="btn-sm btn-resolve" onclick="resolveComment({{ comment.id }}, event)">
            <i class="fas fa-check"></i> Исправлено
        </button>
        <button class="btn-sm btn-delete" onclick="deleteComment({{ comment.id }}, event)">
            <i class="fas fa-trash"></i> Удалить
        </button>
    </div>
    {% endif %}
</div>