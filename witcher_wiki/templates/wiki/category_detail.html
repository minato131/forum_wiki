{% extends 'base.html' %}

{% block title %}{{ category.name }} | –§–æ—Ä—É–º –ø–æ –í—Å–µ–ª–µ–Ω–Ω–æ–π –í–µ–¥—å–º–∞–∫–∞{% endblock %}

{% block content %}
<style>
    .category-description {
        text-align: center;
        margin-bottom: 30px;
        color: #ccc;
        font-style: italic;
    }
    .articles-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
    }
    .article-card {
        background: rgba(212, 175, 55, 0.1);
        padding: 20px;
        border-radius: 10px;
        border-left: 4px solid #D4AF37;
    }
    .article-card h3 {
        margin: 0 0 10px 0;
        color: #D4AF37;
    }
    .article-card h3 a {
        color: #D4AF37;
        text-decoration: none;
    }
    .excerpt {
        color: #ccc;
        margin-bottom: 15px;
        line-height: 1.5;
    }
    .meta {
        display: flex;
        gap: 15px;
        font-size: 0.9em;
        color: #888;
        flex-wrap: wrap;
    }
    .no-articles {
        text-align: center;
        color: #888;
        font-style: italic;
        padding: 40px;
    }
    .pagination {
        display: flex;
        justify-content: center;
        gap: 10px;
        margin-top: 30px;
        flex-wrap: wrap;
    }
    .page-btn, .page-current {
        padding: 8px 16px;
        border-radius: 5px;
        text-decoration: none;
    }
    .page-btn {
        background: transparent;
        color: #D4AF37;
        border: 1px solid #D4AF37;
    }
    .page-btn:hover {
        background: #D4AF37;
        color: #1a1a1a;
    }
    .page-current {
        background: #D4AF37;
        color: #1a1a1a;
        font-weight: bold;
    }
    .btn {
        display: inline-block;
        padding: 10px 20px;
        background: #D4AF37;
        color: #1a1a1a;
        text-decoration: none;
        border-radius: 5px;
        margin: 10px;
    }
    .stats {
        text-align: center;
        margin-bottom: 20px;
        color: #888;
    }
</style>

<h1>üìÇ {{ category.name }}</h1>
<div class="category-description">
    <p>{{ category.description }}</p>
</div>
<div class="stats">
    <p>–í—Å–µ–≥–æ —Å—Ç–∞—Ç–µ–π –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏: {{ articles_list.count }}</p>
</div>

<div class="articles-grid">
    {% if articles %}
        {% for article in articles %}
        <div class="article-card">
            <h3><a href="/article/{{ article.slug }}/">üìñ {{ article.title }}</a></h3>
            <p class="excerpt">{{ article.excerpt|truncatechars:150|default:"–û–ø–∏—Å–∞–Ω–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç..." }}</p>
            <div class="meta">
                <span>üë§ {{ article.author.username }}</span>
                <span>üìÖ {{ article.created_at|date:"d.m.Y" }}</span>
                <span>üëÅÔ∏è {{ article.views_count }} –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤</span>
            </div>
        </div>
        {% endfor %}
    {% else %}
        <div class="no-articles">–í —ç—Ç–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–æ–∫–∞ –Ω–µ—Ç —Å—Ç–∞—Ç–µ–π</div>
    {% endif %}
</div>

{% if articles.has_other_pages %}
<div class="pagination">
    {% if articles.has_previous %}
        <a href="?page={{ articles.previous_page_number }}" class="page-btn">‚Üê –ü—Ä–µ–¥—ã–¥—É—â–∞—è</a>
    {% endif %}

    {% for num in articles.paginator.page_range %}
        {% if num == articles.number %}
            <span class="page-current">{{ num }}</span>
        {% else %}
            <a href="?page={{ num }}" class="page-btn">{{ num }}</a>
        {% endif %}
    {% endfor %}

    {% if articles.has_next %}
        <a href="?page={{ articles.next_page_number }}" class="page-btn">–°–ª–µ–¥—É—é—â–∞—è ‚Üí</a>
    {% endif %}
</div>
{% endif %}

<div style="text-align: center;">
    <a href="/" class="btn">üè† –ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
    <a href="/search/" class="btn">üîç –ü–æ–∏—Å–∫</a>
</div>
{% endblock %}