{% extends 'base.html' %}
{% load static %}

{% block title %}–ü—Ä–æ—Ñ–∏–ª—å | Wiki –í–µ–¥—å–º–∞–∫–∞{% endblock %}

{% block content %}
<div style="max-width: 800px; margin: 40px auto; padding: 20px;">
    <!-- –°–æ–æ–±—â–µ–Ω–∏—è -->
    {% if messages %}
        {% for message in messages %}
            <div style="background: {% if message.tags == 'success' %}#4CAF50{% else %}#f44336{% endif %};
                       color: white; padding: 15px; border-radius: 5px; margin-bottom: 20px; text-align: center;">
                {{ message }}
            </div>
        {% endfor %}
    {% endif %}

    <div style="display: grid; grid-template-columns: 1fr 2fr; gap: 30px; margin-bottom: 30px;">
        <!-- –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
        <div style="background: #2d2d2d; padding: 30px; border-radius: 10px; border: 2px solid #D4AF37;">
            <h2 style="color: #D4AF37; text-align: center; margin-bottom: 20px;">üë§ –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h2>

            <div style="text-align: center; margin-bottom: 20px;">
                {% if user_profile.avatar %}
                    <img src="{{ user_profile.avatar.url }}"
                         alt="{{ user.username }}"
                         style="width: 120px; height: 120px; border-radius: 50%; object-fit: cover; border: 3px solid #D4AF37;">
                {% else %}
                    <div style="width: 120px; height: 120px; background: #D4AF37; border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; color: #1a1a1a; font-size: 36px; font-weight: bold; border: 3px solid #D4AF37;">
                        {{ user.username.0|upper }}
                    </div>
                {% endif %}
            </div>

            <div style="text-align: center;">
                <h3 style="color: #D4AF37; margin-bottom: 15px;">{{ user.username }}</h3>
                <p><strong>üìÖ –î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:</strong> {{ user.date_joined|date:"d.m.Y" }}</p>
                <p><strong>üëÅÔ∏è –ü–æ—Å–ª–µ–¥–Ω–∏–π –≤—Ö–æ–¥:</strong> {{ user.last_login|date:"d.m.Y H:i"|default:"–ù–∏–∫–æ–≥–¥–∞" }}</p>

                {% if user.is_staff %}
                    <p><strong>üéØ –†–æ–ª—å:</strong> –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</p>
                {% elif user.groups.all %}
                    <p><strong>üéØ –†–æ–ª—å:</strong> {{ user.groups.first.name }}</p>
                {% else %}
                    <p><strong>üéØ –†–æ–ª—å:</strong> –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</p>
                {% endif %}

                <!-- –°–æ—Ü—Å–µ—Ç–∏ -->
                {% if user_profile.has_social_links %}
                <div style="margin-top: 20px; padding: 15px; background: #1a1a1a; border-radius: 5px;">
                    <p style="color: #D4AF37; margin-bottom: 10px; font-weight: bold;">üåê –°–æ—Ü—Å–µ—Ç–∏:</p>
                    <div style="display: flex; justify-content: center; gap: 15px; flex-wrap: wrap;">
                        {% if user_profile.telegram %}
                            <a href="{{ user_profile.telegram }}" target="_blank" style="color: #0088cc; text-decoration: none;">
                                <div style="text-align: center;">
                                    <div style="font-size: 24px;">üì±</div>
                                    <div style="font-size: 12px; color: #0088cc;">Telegram</div>
                                    <div style="color: #4CAF50; font-size: 10px;">‚úì</div>
                                </div>
                            </a>
                        {% else %}
                            <div style="text-align: center; opacity: 0.5;">
                                <div style="font-size: 24px;">üì±</div>
                                <div style="font-size: 12px; color: #888;">Telegram</div>
                                <div style="color: #f44336; font-size: 10px;">‚úó</div>
                            </div>
                        {% endif %}

                        {% if user_profile.vk %}
                            <a href="{{ user_profile.vk }}" target="_blank" style="color: #4a76a8; text-decoration: none;">
                                <div style="text-align: center;">
                                    <div style="font-size: 24px;">üë•</div>
                                    <div style="font-size: 12px; color: #4a76a8;">VK</div>
                                    <div style="color: #4CAF50; font-size: 10px;">‚úì</div>
                                </div>
                            </a>
                        {% else %}
                            <div style="text-align: center; opacity: 0.5;">
                                <div style="font-size: 24px;">üë•</div>
                                <div style="font-size: 12px; color: #888;">VK</div>
                                <div style="color: #f44336; font-size: 10px;">‚úó</div>
                            </div>
                        {% endif %}

                        {% if user_profile.youtube %}
                            <a href="{{ user_profile.youtube }}" target="_blank" style="color: #ff0000; text-decoration: none;">
                                <div style="text-align: center;">
                                    <div style="font-size: 24px;">üé•</div>
                                    <div style="font-size: 12px; color: #ff0000;">YouTube</div>
                                    <div style="color: #4CAF50; font-size: 10px;">‚úì</div>
                                </div>
                            </a>
                        {% else %}
                            <div style="text-align: center; opacity: 0.5;">
                                <div style="font-size: 24px;">üé•</div>
                                <div style="font-size: 12px; color: #888;">YouTube</div>
                                <div style="color: #f44336; font-size: 10px;">‚úó</div>
                            </div>
                        {% endif %}

                        {% if user_profile.discord %}
                            <div style="text-align: center;">
                                <div style="font-size: 24px;">üí¨</div>
                                <div style="font-size: 12px; color: #5865F2;">Discord</div>
                                <div style="color: #4CAF50; font-size: 10px;">‚úì</div>
                                <div style="font-size: 10px; color: #888;">{{ user_profile.discord }}</div>
                            </div>
                        {% else %}
                            <div style="text-align: center; opacity: 0.5;">
                                <div style="font-size: 24px;">üí¨</div>
                                <div style="font-size: 12px; color: #888;">Discord</div>
                                <div style="color: #f44336; font-size: 10px;">‚úó</div>
                            </div>
                        {% endif %}
                    </div>
                </div>
                {% endif %}

                <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
                <div style="margin-top: 20px; padding: 15px; background: #1a1a1a; border-radius: 5px;">
                    <p><strong>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:</strong></p>
                    <p>üìù –°—Ç–∞—Ç–µ–π: {{ articles_count }}</p>
                    <p>‚úÖ –û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ: {{ published_articles_count }}</p>
                </div>
            </div>
        </div>

        <!-- –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ - —Ñ–æ—Ä–º–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è -->
        <div style="background: #2d2d2d; padding: 30px; border-radius: 10px; border: 2px solid #D4AF37;">
            <h3 style="color: #D4AF37; margin-bottom: 20px;">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</h3>

            <form method="post" enctype="multipart/form-data">
                {% csrf_token %}

                <!-- –ê–≤–∞—Ç–∞—Ä -->
                <div style="margin-bottom: 20px;">
                    <label style="color: #D4AF37; display: block; margin-bottom: 8px; font-weight: bold;">
                        {{ form.avatar.label }}
                    </label>
                    {{ form.avatar }}
                    {% if form.avatar.help_text %}
                        <small style="color: #888; font-size: 12px; display: block; margin-top: 5px;">
                            {{ form.avatar.help_text }}
                        </small>
                    {% endif %}
                    {% if form.avatar.errors %}
                        <div style="color: #ff6b6b; font-size: 12px; margin-top: 5px;">
                            {{ form.avatar.errors.0 }}
                        </div>
                    {% endif %}
                </div>

                <!-- –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px;">
                    <div>
                        <label style="color: #D4AF37; display: block; margin-bottom: 8px; font-weight: bold;">
                            {{ form.first_name.label }}
                        </label>
                        {{ form.first_name }}
                    </div>
                    <div>
                        <label style="color: #D4AF37; display: block; margin-bottom: 8px; font-weight: bold;">
                            {{ form.last_name.label }}
                        </label>
                        {{ form.last_name }}
                    </div>
                </div>

                <!-- Email -->
                <div style="margin-bottom: 20px;">
                    <label style="color: #D4AF37; display: block; margin-bottom: 8px; font-weight: bold;">
                        {{ form.email.label }}
                    </label>
                    {{ form.email }}
                    {% if form.email.errors %}
                        <div style="color: #ff6b6b; font-size: 12px; margin-top: 5px;">
                            {{ form.email.errors.0 }}
                        </div>
                    {% endif %}
                </div>

                <!-- –û —Å–µ–±–µ -->
                <div style="margin-bottom: 20px;">
                    <label style="color: #D4AF37; display: block; margin-bottom: 8px; font-weight: bold;">
                        {{ form.bio.label }}
                    </label>
                    {{ form.bio }}
                </div>

                <!-- –°–æ—Ü—Å–µ—Ç–∏ -->
                <div style="margin-bottom: 25px;">
                    <h4 style="color: #D4AF37; margin-bottom: 15px; border-bottom: 1px solid #444; padding-bottom: 5px;">
                        üåê –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏
                    </h4>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                        <div>
                            <label style="color: #D4AF37; display: block; margin-bottom: 8px; font-weight: bold;">
                                {{ form.telegram.label }}
                            </label>
                            {{ form.telegram }}
                        </div>
                        <div>
                            <label style="color: #D4AF37; display: block; margin-bottom: 8px; font-weight: bold;">
                                {{ form.vk.label }}
                            </label>
                            {{ form.vk }}
                        </div>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 15px;">
                        <div>
                            <label style="color: #D4AF37; display: block; margin-bottom: 8px; font-weight: bold;">
                                {{ form.youtube.label }}
                            </label>
                            {{ form.youtube }}
                        </div>
                        <div>
                            <label style="color: #D4AF37; display: block; margin-bottom: 8px; font-weight: bold;">
                                {{ form.discord.label }}
                            </label>
                            {{ form.discord }}
                        </div>
                    </div>
                </div>

                <!-- –ö–Ω–æ–ø–∫–∏ -->
                <div style="text-align: center;">
                    <button type="submit"
                            style="background: #D4AF37; color: #1a1a1a; border: none; padding: 12px 30px; border-radius: 5px; font-weight: bold; cursor: pointer; font-size: 16px;">
                        üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- –°—Ç–∏–ª–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –≤–Ω–µ—à–Ω–µ–≥–æ –≤–∏–¥–∞ —Ñ–æ—Ä–º -->
<style>
    .form-control {
        width: 100%;
        padding: 10px;
        background: #1a1a1a;
        border: 1px solid #444;
        border-radius: 5px;
        color: #e8e8e8;
        font-size: 14px;
    }

    .form-control:focus {
        outline: none;
        border-color: #D4AF37;
        box-shadow: 0 0 5px rgba(212, 175, 55, 0.5);
    }
</style>
{% endblock %}