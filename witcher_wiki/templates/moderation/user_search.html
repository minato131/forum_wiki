{% extends 'base.html' %}

{% block title %}–ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π | –ü–∞–Ω–µ–ª—å –º–æ–¥–µ—Ä–∞—Ü–∏–∏{% endblock %}

{% block content %}
<style>
    .user-card {
        background: #2c3e50;
        border-radius: 8px;
        padding: 1rem;
        margin-bottom: 1rem;
        border-left: 4px solid #3498db;
        transition: transform 0.2s;
    }
    .user-card:hover {
        transform: translateX(5px);
        background: #34495e;
    }
    .status-badge {
        padding: 0.25rem 0.75rem;
        border-radius: 15px;
        font-size: 0.85rem;
        font-weight: 500;
    }
    .status-active { background: #27ae60; color: white; }
    .status-banned { background: #e74c3c; color: white; }
    .status-warning { background: #f39c12; color: white; }
    .search-form {
        background: #34495e;
        border-radius: 10px;
        padding: 1.5rem;
        margin-bottom: 2rem;
    }
</style>

<div class="container py-4">
    <!-- –•–ª–µ–±–Ω—ã–µ –∫—Ä–æ—à–∫–∏ -->
    <nav style="margin-bottom: 2rem; background: #2c3e50; padding: 1rem; border-radius: 8px;">
        <ol style="display: flex; list-style: none; margin: 0; padding: 0;">
            <li style="margin-right: 0.5rem;">
                <a href="{% url 'wiki:moderation_dashboard' %}" style="color: #ecf0f1; text-decoration: none; font-weight: 500;">–ü–∞–Ω–µ–ª—å –º–æ–¥–µ—Ä–∞—Ü–∏–∏</a>
            </li>
            <li style="margin-right: 0.5rem; color: #7f8c8d;">‚Ä∫</li>
            <li style="color: #f1c40f; font-weight: 500;">–ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</li>
        </ol>
    </nav>

    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
    <div style="background: linear-gradient(135deg, #34495e, #2c3e50); border-radius: 12px; padding: 1.5rem; margin-bottom: 2rem;">
        <h1 style="margin: 0; color: #ecf0f1; display: flex; align-items: center; gap: 1rem;">
            <span style="background: #3498db; color: white; width: 50px; height: 50px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.5rem;">
                üîç
            </span>
            –ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–ª—è –º–æ–¥–µ—Ä–∞—Ü–∏–∏
        </h1>
    </div>

    <!-- –§–æ—Ä–º–∞ –ø–æ–∏—Å–∫–∞ -->
    <div class="search-form">
        <form method="get">
            <div class="row g-3">
                <div class="col-md-6">
                    <label style="color: #ecf0f1; font-weight: 500; margin-bottom: 0.5rem;">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:</label>
                    {{ form.username }}
                </div>
                <div class="col-md-6">
                    <label style="color: #ecf0f1; font-weight: 500; margin-bottom: 0.5rem;">Email:</label>
                    {{ form.email }}
                </div>
                <div class="col-md-12">
                    <div class="form-check form-check-inline">
                        {{ form.has_warnings }}
                        <label class="form-check-label" style="color: #ecf0f1;">
                            –¢–æ–ª—å–∫–æ —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è–º–∏
                        </label>
                    </div>
                    <div class="form-check form-check-inline">
                        {{ form.is_banned }}
                        <label class="form-check-label" style="color: #ecf0f1;">
                            –¢–æ–ª—å–∫–æ –∑–∞–±–∞–Ω–µ–Ω–Ω—ã–µ
                        </label>
                    </div>
                </div>
                <div class="col-md-12">
                    <button type="submit" class="btn btn-primary" style="background: #3498db; border: none; padding: 0.75rem 2rem;">
                        üîç –ù–∞–π—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
                    </button>
                    <a href="{% url 'wiki:user_search' %}" class="btn btn-secondary" style="background: #7f8c8d; border: none;">
                        –°–±—Ä–æ—Å–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã
                    </a>
                </div>
            </div>
        </form>
    </div>

    <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ -->
    {% if users %}
    <div style="background: #2c3e50; border-radius: 12px; padding: 1.5rem; margin-bottom: 2rem;">
        <h3 style="color: #ecf0f1; margin-bottom: 1.5rem;">
            –ù–∞–π–¥–µ–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: {{ users|length }}
        </h3>
        
        <div class="row">
            {% for item in users %}
            <div class="col-md-6">
                <div class="user-card">
                    <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
                        <div>
                            <h4 style="margin: 0; color: #3498db;">
                                <a href="{% url 'wiki:user_detail' item.user.id %}" style="color: #3498db; text-decoration: none;">
                                    {{ item.user.username }}
                                </a>
                            </h4>
                            <div style="color: #bdc3c7; font-size: 0.9rem; margin-top: 0.25rem;">
                                {{ item.user.email }}
                            </div>
                        </div>
                        <div>
                            {% if item.status.is_banned %}
                            <span class="status-badge status-banned">–ó–∞–±–∞–Ω–µ–Ω</span>
                            {% elif item.status.total_warnings > 0 %}
                            <span class="status-badge status-warning">
                                {{ item.status.total_warnings }} –ø—Ä–µ–¥.
                            </span>
                            {% else %}
                            <span class="status-badge status-active">–ê–∫—Ç–∏–≤–µ–Ω</span>
                            {% endif %}
                        </div>
                    </div>
                    
                    <div style="display: flex; gap: 1rem; font-size: 0.9rem;">
                        <div style="color: #bdc3c7;">
                            <strong>–°—Ç–∞—Ç–µ–π:</strong> {{ item.status.user.article_set.count }}
                        </div>
                        <div style="color: #bdc3c7;">
                            <strong>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è:</strong> {{ item.user.date_joined|date:"d.m.Y" }}
                        </div>
                    </div>
                    
                    <div style="margin-top: 1rem;">
                        <a href="{% url 'wiki:user_detail' item.user.id %}" 
                           style="color: #f1c40f; text-decoration: none; font-weight: 500; font-size: 0.9rem;">
                            üëÅÔ∏è –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è ‚Üí
                        </a>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    {% elif form.is_bound %}
    <div style="background: #2c3e50; border-radius: 12px; padding: 3rem; text-align: center;">
        <div style="font-size: 3rem; color: #7f8c8d; margin-bottom: 1rem;">
            üîç
        </div>
        <h3 style="color: #bdc3c7;">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h3>
        <p style="color: #95a5a6;">–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –∫—Ä–∏—Ç–µ—Ä–∏–∏ –ø–æ–∏—Å–∫–∞</p>
    </div>
    {% endif %}

    <!-- –ë—ã—Å—Ç—Ä—ã–µ —Å—Å—ã–ª–∫–∏ -->
    <div style="background: #2c3e50; border-radius: 12px; padding: 1.5rem;">
        <h3 style="color: #ecf0f1; margin-bottom: 1rem;">–ë—ã—Å—Ç—Ä—ã–µ —Å—Å—ã–ª–∫–∏:</h3>
        <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
            <a href="{% url 'wiki:banned_users' %}" class="btn btn-danger" style="background: #e74c3c; border: none;">
                ‚õî –ó–∞–±–∞–Ω–µ–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
            </a>
            <a href="{% url 'wiki:warned_users' %}" class="btn btn-warning" style="background: #f39c12; border: none;">
                ‚ö†Ô∏è –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è–º–∏
            </a>
            <a href="{% url 'wiki:moderation_dashboard' %}" class="btn btn-secondary" style="background: #7f8c8d; border: none;">
                ‚Üê –ù–∞–∑–∞–¥ –≤ –ø–∞–Ω–µ–ª—å –º–æ–¥–µ—Ä–∞—Ü–∏–∏
            </a>
        </div>
    </div>
</div>
{% endblock %}